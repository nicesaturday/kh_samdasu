<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC 
"-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="qna">

    <select id="getTotalQnaCount" resultType="int">
        select count(*) from Qna
    </select>
	<select id="getQnas" resultType="com.samdasu.dto.Qna">
		select * from Qna order by resdate desc
	</select>	
	<select id="getQna" parameterType="com.samdasu.dto.Qna" resultType="com.samdasu.dto.Qna">
		select * from Qna where qnum=#{qnum}
	</select>	
	<insert id="insQna" parameterType="com.samdasu.dto.Qna">
		<selectKey keyProperty="qn" resultType="int" order="BEFORE">
		  select qseq.NEXTVAL from DUAL
		</selectKey>
		insert into Qna values (#{qn} , 
								#{id} , 
								#{qtitle} , 
								#{qcomment} , 
								#{q_level} ,
								#{parno} ,
								#{hits} ,
								#{resdate})
	</insert>
 	<update id="upQna" parameterType="com.samdasu.dto.Qna">
		update Qna set qtitle=#{qtitle} , 
					   qcomment=#{qcomment} ,
					    where qnum=#{qnum}
	</update>
<!-- 	<update id="upQnaHits" parameterType="int">
	    update Qna set hits=hits+1 where bnum=#{bnum}
	</update> -->
	<delete id="delQna" parameterType="int">
		delete from Qna where qnum=#{qnum}
	</delete> 
</mapper> 


